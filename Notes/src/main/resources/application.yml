spring:
  application:
    name: notes-service

  datasource:
    # Example Postgres datasource (adjust host, port, db, user, password)
    url: jdbc:postgresql://${DB_HOST}:${DB_PORT}/notes?sslmode=disable
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
    driver-class-name: org.postgresql.Driver

  jpa:
    hibernate:
      ddl-auto: update # can be: none, validate, update, create, create-drop
    show-sql: true
    properties:
      hibernate:
        format_sql: true
    database-platform: org.hibernate.dialect.PostgreSQLDialect

  # Temporarily disable Spring Cloud / Spring Boot compatibility verifier so the app can start
  cloud:
    compatibility-verifier:
      enabled: false

server:
  port: ${NOTES_SERVICE_PORT}
  # Allow connections from any network interface (not just localhost)
  address: 0.0.0.0

eureka:
  client:
    serviceUrl:
      defaultZone: http://${EUREKA_HOST}:${EUREKA_PORT}/eureka/
    fetch-registry: true
    register-with-eureka: true
  instance:
    prefer-ip-address: false

management:
  endpoints:
    web:
      exposure:
        include: health,info

logging:
  level:
    uk.thisjowi.Notes.service.AuthenticationClient: DEBUG

# Kafka configuration
kafka:
  bootstrap-servers: ${KAFKA_HOST}:${KAFKA_PORT}
  consumer:
    group-id: notes-service-group
    auto-offset-reset: earliest

auth:
  service:
    url: http://${CLOUD_GATEWAY_HOST}:${CLOUD_GATEWAY_PORT}/api/auth

jwt:
  secret: "${JWT_SECRET}"
  expiration: 86400000

# Encryption configuration (AES-256-CBC with IV)
encryption:
  secret-key: ${JWT_SECRET}
